<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üåç Disaster Dashboard (v3.1 - Weather API)</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
  <h1><span class="live-dot"></span> IoT Disaster Prediction</h1>
  <p class="location-context">Monitoring Location: <strong>Vellore, Tamil Nadu, India</strong></p>

  <div class="main-grid">
    <div id="status" class="status-box">
      <h2>Latest Sensor Status</h2>
      <div id="risk-display">
        <span id="risk-label">--</span>
        <span id="confidence-label">--%</span>
      </div>
      <p id="impact">Est. Impact: --</p>
    </div>

    <div id="forecast-box" class="weather-widget">
  <p>Loading forecast...</p>
</div>

  <div class="grid">
    <div class="chart-container"><canvas id="tempChart"></canvas></div>
    <div class="chart-container"><canvas id="humChart"></canvas></div>
    <div class="chart-container"><canvas id="rainChart"></canvas></div>
    <div class="chart-container"><canvas id="soilChart"></canvas></div>
  </div>

  <div class="historical-container">
    <h2>Historical Trends</h2>
    <div class="hist-buttons">
      <button class="hist-btn active" onclick="loadHistoricalData('24h', this)">24 Hours</button>
      <button class="hist-btn" onclick="loadHistoricalData('7d', this)">7 Days</button>
    </div>
    <div class="chart-container-large">
      <canvas id="historicalChart"></canvas>
    </div>
  </div>

  <div class="pending-container">
    <h2>Pending Events (Awaiting Ground Truth)</h2>
    <p>When a disaster *actually* occurs, enter the real impact time (in hours) and click Save.</p>
    <table id="pending-table">
      <thead>
        <tr>
          <th>Timestamp</th>
          <th>Risk</th>
          <th>Conf.</th>
          <th>T</th>
          <th>H</th>
          <th>Soil</th>
          <th>Rain</th>
          <th>Real Impact Time (hours)</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody id="pending-events-body">
        </tbody>
    </table>
    <div id="pending-loading">Loading pending events...</div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@2.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
  
  <script src="/static/dashboard.js"></script>
</body>
</html> 